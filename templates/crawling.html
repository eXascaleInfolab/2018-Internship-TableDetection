{% extends 'layout.html' %}

{% block body %}
<div class="row">
  <div class="progress progress-striped active">
      <div id="topbar" class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 20%">
          <span class="sr-only">20% Complete</span>
      </div>
  </div>
</div>
<div class="col-lg-8">
  <div>
      <h1 class="page-header"> Crawling website ... </h1>
      {% if session.logged_in == NULL %}
      <p class="lead">Log in to be able to crawl a domain.</p>
      <a href="/register" class="btn btn-primary btn-lg">Register</a>
      <a href="/login" class="btn btn-success btn-lg">Login</a>
      {% endif %}

      {% if session.logged_in != NULL %}
      <p class="lead">The data is getting collected, if you want to interrupt the process preemptively, please do so. </p>
      <div>(In this demo version after 15 min the process will be automatically interrupted and this page will be redirected
          to perform Table Detection. If you close this page the crawling will be performed and can be
          reused later, but the table detection will not start) </div>
      <hr>
      <a href="/crawling/end" class="btn btn-primary btn-lg">Interrupt Crawling</a>
      <br>
      <div class="pre-scrollable">
          {% for item in debug %}
          <p>{{ item }}</p>
          {% endfor %}
      </div>
      {% endif %}
  </div>
</div>


<script>
     window.setTimeout(function(){
          // Interrupt crawling
           window.location.href = '{{url_for("autoend_crawling")}}';
     }, {{max_crawling_duration * 1000}});

 </script>


{% endblock %}
